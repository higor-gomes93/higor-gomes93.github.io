<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano Alimentar Interativo</title>
    
    <!-- Link para o Manifesto -->
    <link rel="manifest" href="manifest.json">
    <!-- Cor do tema para o navegador no celular -->
    <meta name="theme-color" content="#16a34a"/>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .modal-backdrop { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 40; opacity: 0; transition: opacity 0.3s ease; }
        .modal-content { transform: scale(0.95); transition: transform 0.3s ease; }
        .modal-backdrop.flex { opacity: 1; }
        .modal-backdrop.flex .modal-content { transform: scale(1); }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-green-700">Meu Plano Alimentar</h1>
            <p class="text-gray-600 mt-2">Sua dieta diária com opções de substituições inteligentes.</p>
        </header>

        <main class="space-y-8">
            <!-- Café da Manhã -->
            <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                <h2 class="text-2xl font-semibold mb-4 text-green-600 border-b pb-2">Café da Manhã (08:30)</h2>
                <ul class="space-y-4">
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Pão de forma integral</span><span class="text-sm text-gray-500 block">2 unidades (~104 kcal)</span></div>
                        <button onclick="showModal('pao')" class="bg-green-100 text-green-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-green-200 transition-colors">Ver Substituições</button>
                    </li>
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Ovo inteiro cozido</span><span class="text-sm text-gray-500 block">1 unidade (~80 kcal)</span></div>
                        <button onclick="showModal('ovo')" class="bg-green-100 text-green-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-green-200 transition-colors">Ver Substituições</button>
                    </li>
                     <li class="flex justify-between items-center"><div><span class="font-semibold">Clara de ovo cozida</span><span class="text-sm text-gray-500 block">1 unidade (~21 kcal)</span></div></li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Requeijão cremoso</span><span class="text-sm text-gray-500 block">30g (~77 kcal)</span></div></li>
                </ul>
            </div>
            <!-- Almoço -->
            <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                <h2 class="text-2xl font-semibold mb-4 text-yellow-600 border-b pb-2">Almoço (12:30)</h2>
                <ul class="space-y-4">
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Peito de frango cozido</span><span class="text-sm text-gray-500 block">90g (~147 kcal)</span></div>
                        <button onclick="showModal('frango')" class="bg-yellow-100 text-yellow-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-yellow-200 transition-colors">Ver Substituições</button>
                    </li>
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Arroz branco cozido</span><span class="text-sm text-gray-500 block">100g (~128 kcal)</span></div>
                        <button onclick="showModal('arroz')" class="bg-yellow-100 text-yellow-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-yellow-200 transition-colors">Ver Substituições</button>
                    </li>
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Fruta (ex: Abacaxi)</span><span class="text-sm text-gray-500 block">150g (~72 kcal)</span></div>
                        <button onclick="showModal('fruta_almoco')" class="bg-yellow-100 text-yellow-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-yellow-200 transition-colors">Ver Substituições</button>
                    </li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Azeite de oliva extra virgem</span><span class="text-sm text-gray-500 block">7g (~62 kcal)</span></div></li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Salada de legumes no vapor e Alface</span><span class="text-sm text-gray-500 block">210g (~48 kcal)</span></div></li>
                </ul>
            </div>
            <!-- Lanche da Tarde -->
            <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                <h2 class="text-2xl font-semibold mb-4 text-orange-600 border-b pb-2">Lanche da Tarde (15:30)</h2>
                <ul class="space-y-4">
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Fruta (ex: Banana nanica)</span><span class="text-sm text-gray-500 block">160g (~146 kcal)</span></div>
                        <button onclick="showModal('fruta_lanche')" class="bg-orange-100 text-orange-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-orange-200 transition-colors">Ver Substituições</button>
                    </li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Whey Protein</span><span class="text-sm text-gray-500 block">20g (~80 kcal)</span></div></li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Aveia em flocos</span><span class="text-sm text-gray-500 block">20g (~79 kcal)</span></div></li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Pasta de amendoim</span><span class="text-sm text-gray-500 block">20g (~123 kcal)</span></div></li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Creatina</span><span class="text-sm text-gray-500 block">5g</span></div></li>
                </ul>
            </div>
            <!-- Jantar -->
            <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                <h2 class="text-2xl font-semibold mb-4 text-indigo-600 border-b pb-2">Jantar (19:30)</h2>
                 <ul class="space-y-4">
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Peito de frango cozido</span><span class="text-sm text-gray-500 block">90g (~147 kcal)</span></div>
                        <button onclick="showModal('frango')" class="bg-indigo-100 text-indigo-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-indigo-200 transition-colors">Ver Substituições</button>
                    </li>
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Arroz branco cozido</span><span class="text-sm text-gray-500 block">100g (~128 kcal)</span></div>
                        <button onclick="showModal('arroz')" class="bg-indigo-100 text-indigo-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-indigo-200 transition-colors">Ver Substituições</button>
                    </li>
                    <li class="flex justify-between items-center">
                        <div><span class="font-semibold">Fruta (ex: Abacaxi)</span><span class="text-sm text-gray-500 block">150g (~72 kcal)</span></div>
                        <button onclick="showModal('fruta_almoco')" class="bg-indigo-100 text-indigo-800 text-sm font-semibold px-3 py-1 rounded-full hover:bg-indigo-200 transition-colors">Ver Substituições</button>
                    </li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Azeite de oliva extra virgem</span><span class="text-sm text-gray-500 block">7g (~62 kcal)</span></div></li>
                    <li class="flex justify-between items-center"><div><span class="font-semibold">Salada de legumes no vapor e Alface</span><span class="text-sm text-gray-500 block">210g (~48 kcal)</span></div></li>
                </ul>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div id="modal-backdrop" class="modal-backdrop items-center justify-center" onclick="closeModal()">
        <div id="modal-content" class="modal-content bg-white w-11/12 md:max-w-md mx-auto rounded-2xl shadow-2xl p-6 md:p-8" onclick="event.stopPropagation()">
            <h3 id="modal-title" class="text-2xl font-bold text-gray-800 mb-5">Substituições</h3>
            <ul id="modal-list" class="space-y-3 text-gray-700"></ul>
            <button onclick="closeModal()" class="mt-6 w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-all">Fechar</button>
        </div>
    </div>


    <script>
        const substitutions = {
            pao: { title: 'Substituições para Pão (~104 kcal)', items: [ 'Tapioca (massa pronta): 40g', 'Batata doce cozida: 120g', 'Cuscuz de milho cozido: 45g', 'Crepioca (1 ovo + 2 col. de tapioca)', ] },
            ovo: { title: 'Substituições para Ovo (~80 kcal)', items: [ 'Tofu firme: 100g', 'Queijo Cottage: 80g', 'Iogurte Grego natural (sem açúcar): 120g', '4 Claras de ovo', ] },
            frango: { title: 'Substituições para Frango (~147 kcal)', items: [ 'Filé de Tilápia ou Pescada Branca: 150g', 'Carne bovina magra (patinho moído): 100g', 'Ovos inteiros cozidos: 2 unidades', 'Lentilha cozida: 200g', ] },
            arroz: { title: 'Substituições para Arroz (~128 kcal)', items: [ 'Macarrão cozido: 100g', 'Batata inglesa cozida: 160g', 'Quinoa cozida: 100g', 'Mandioquinha (batata baroa) cozida: 140g', 'Inhame cozido: 110g', 'Cará cozido: 165g', 'Milho verde cozido: 130g' ] },
            fruta_lanche: { title: 'Substituições para Fruta (~146 kcal)', items: [ 'Maçã Fuji ou Gala: 250g (2 unidades pequenas)', 'Mamão Papaya: 300g (1 unidade pequena)', 'Uvas: 200g', 'Manga Palmer: 220g', 'Abacate: 90g (meio abacate pequeno)', 'Açaí (polpa pura, sem açúcar): 240g', 'Caqui: 210g (1 unidade grande)', 'Banana prata: 165g (1 e 1/2 unidade)' ] },
            fruta_almoco: { title: 'Substituições para Fruta (~72 kcal)', items: [ 'Laranja: 150g (1 unidade média)', 'Kiwi: 120g (2 unidades pequenas)', 'Morangos: 220g', 'Melão: 250g', 'Pêra: 125g (1 unidade média)', 'Ameixa vermelha: 155g (cerca de 3 unidades)', 'Goiaba: 105g (1 unidade pequena)', 'Pêssego: 185g (2 unidades médias)' ] }
        };

        const modalBackdrop = document.getElementById('modal-backdrop');
        const modalTitle = document.getElementById('modal-title');
        const modalList = document.getElementById('modal-list');

        function showModal(foodKey) {
            const data = substitutions[foodKey];
            if (!data) return;
            modalTitle.textContent = data.title;
            modalList.innerHTML = '';
            data.items.forEach(itemText => {
                const li = document.createElement('li');
                li.className = 'p-3 bg-gray-100 rounded-lg flex items-center';
                li.innerHTML = `<svg class="w-5 h-5 text-green-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><span>${itemText}</span>`;
                modalList.appendChild(li);
            });
            modalBackdrop.style.display = 'flex';
            setTimeout(() => { modalBackdrop.classList.add('flex'); }, 10);
        }

        function closeModal() {
            modalBackdrop.classList.remove('flex');
            setTimeout(() => { modalBackdrop.style.display = 'none'; }, 300);
        }

        window.addEventListener('keydown', (event) => { if (event.key === 'Escape') closeModal(); });
        
        // --- CÓDIGO NOVO PARA O PWA ---
        // Registra o Service Worker
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js').then(registration => {
              console.log('ServiceWorker registrado com sucesso: ', registration.scope);
            }, err => {
              console.log('Registro do ServiceWorker falhou: ', err);
            });
          });
        }
    </script>

</body>
</html>
